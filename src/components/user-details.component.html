<div class="overlay" *ngIf="isOpen" (click)="close()">
  <div class="modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>User Details</h3>
      <button class="close-button" (click)="close()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>

    <div class="modal-body" *ngIf="user">
      <div class="user-header">
        <div class="avatar">{{ getInitials(user.name) }}</div>
        <div>
          <h4>{{ user.name }}</h4>
          <p class="email">{{ user.email }}</p>
        </div>
      </div>

      <div class="details-grid">
        <div class="detail-item">
          <label>Login Type</label>
          <div class="detail-value">
            <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/>
              <polyline points="10 17 15 12 10 7"/>
              <line x1="15" y1="12" x2="3" y2="12"/>
            </svg>
            <span>{{ user.loginType }}</span>
          </div>
        </div>

        <div class="detail-item">
          <label>Last Login</label>
          <div class="detail-value">
            <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12 6 12 12 16 14"/>
            </svg>
            <span>{{ formatLastLogin(user.lastLogin) }}</span>
          </div>
        </div>

        <div class="detail-item">
          <label>Password Expires</label>
          <div class="detail-value" [class.warning]="getDaysUntilExpiry(user.passwordExpiryDate) < 15">
            <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
              <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
            </svg>
            <span>{{ getPasswordExpiryText(user.passwordExpiryDate) }}</span>
          </div>
        </div>

        <div class="detail-item">
          <label>Status</label>
          <div class="detail-value">
            <app-status-badge [status]="user.status" />
          </div>
        </div>

        <div class="detail-item">
          <label>User Type</label>
          <div class="detail-value">
            <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
              <circle cx="12" cy="7" r="4"/>
            </svg>
            <span>{{ user.userType }}</span>
          </div>
        </div>

        <div class="detail-item">
          <label>Access Level</label>
          <div class="detail-value">
            <svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
            </svg>
            <span>{{ user.access }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
